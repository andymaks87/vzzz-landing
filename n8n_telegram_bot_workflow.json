{
  "name": "VZZZ Telegram Bot",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "telegram-webhook",
        "options": {}
      },
      "name": "Telegram Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        250,
        300
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json[\"message\"][\"text\"]}}",
              "operation": "contains",
              "value2": "/start"
            },
            {
              "value1": "={{$json[\"message\"][\"text\"]}}",
              "operation": "contains",
              "value2": "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"
            },
            {
              "value1": "={{$json[\"message\"][\"text\"]}}",
              "operation": "contains",
              "value2": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ–∫"
            }
          ]
        }
      },
      "name": "Switch Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        500,
        300
      ]
    },
    {
      "parameters": {
        "chatId": "={{$json[\"message\"][\"chat\"][\"id\"]}}",
        "text": "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ FisherHouse!\n\n–Ø –ø–æ–º–æ–≥—É –≤–∞–º –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º –∏–ª–∏ –ø—Ä–∏–Ω—è—Ç—å –æ–ø–ª–∞—Ç—É.\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∏–∂–µ:",
        "replyMarkup": "replyKeyboard",
        "replyKeyboardOptions": {
          "resize_keyboard": true,
          "one_time_keyboard": false,
          "keyboard": [
            [
              {
                "text": "üìÖ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º"
              },
              {
                "text": "üßæ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ–∫"
              }
            ],
            [
              {
                "text": "üìç –ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è"
              },
              {
                "text": "üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º"
              }
            ]
          ]
        }
      },
      "name": "Send Welcome",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        750,
        100
      ]
    },
    {
      "parameters": {
        "chatId": "={{$json[\"message\"][\"chat\"][\"id\"]}}",
        "text": "–î–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –Ω–∞—à —Å–∞–π—Ç –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–µ –¥–∞—Ç—ã:",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboardOptions": {
          "rows": [
            [
              {
                "text": "–û—Ç—Ä—ã—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å",
                "url": "https://vazuza-fisherhouse.ru/#booking"
              }
            ]
          ]
        }
      },
      "name": "Send Booking Link",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        750,
        300
      ]
    },
    {
      "parameters": {
        "chatId": "={{$json[\"message\"][\"chat\"][\"id\"]}}",
        "text": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ —á–µ–∫–∞ –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç –æ–ø–ª–∞—Ç—ã –ø—Ä—è–º–æ –≤ —ç—Ç–æ—Ç —á–∞—Ç. –Ø –ø–µ—Ä–µ–¥–∞–º –µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É."
      },
      "name": "Ask for Receipt",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        750,
        500
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{$json[\"message\"][\"photo\"] ? true : false}}",
              "value2": true
            }
          ]
        }
      },
      "name": "Check for Photo",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        500,
        600
      ]
    },
    {
      "parameters": {
        "chatId": "YOUR_ADMIN_CHAT_ID",
        "text": "üí∞ –ù–æ–≤—ã–π —á–µ–∫ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞!",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "name": "Forward to Admin",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        750,
        700
      ]
    },
    {
      "parameters": {
        "chatId": "={{$node[\"Telegram Webhook\"].json[\"message\"][\"chat\"][\"id\"]}}",
        "text": "–°–ø–∞—Å–∏–±–æ! –í–∞—à —á–µ–∫ –ø–æ–ª—É—á–µ–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±—Ä–æ–Ω–∏."
      },
      "name": "Confirm Receipt",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        950,
        700
      ]
    },
    {
      "parameters": {
        "chatId": "={{$json[\"message\"][\"chat\"][\"id\"]}}",
        "text": "üìç –ù–∞—à –∞–¥—Ä–µ—Å:\n–°–º–æ–ª–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –í–∞–∑—É–∑—Å–∫–æ–µ –≤–æ–¥–æ—Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –¥. –•–ª–µ–ø–µ–Ω—å.\n\n–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 55.96231, 34.46818",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboardOptions": {
          "rows": [
             [
                {
                   "text": "–û—Ç–∫—Ä—ã—Ç—å –≤ –Ø–Ω–¥–µ–∫—Å.–ù–∞–≤–∏–≥–∞—Ç–æ—Ä–µ",
                   "url": "yandexnavi://build_route_on_map?lat_to=55.96231&lon_to=34.46818"
                }
             ]
          ]
        }
      },
      "name": "Send Location",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        750,
        900
      ]
    }
  ],
  "connections": {
    "Telegram Webhook": {
      "main": [
        [
          {
            "node": "Switch Command",
            "type": "main",
            "index": 0
          },
          {
             "node": "Check for Photo",
             "type": "main",
             "index": 0
          }
        ]
      ]
    },
    "Switch Command": {
      "main": [
        [
          {
            "node": "Send Welcome",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Booking Link",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Ask for Receipt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check for Photo": {
      "main": [
        [
          {
            "node": "Forward to Admin",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Forward to Admin": {
      "main": [
        [
          {
            "node": "Confirm Receipt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}
